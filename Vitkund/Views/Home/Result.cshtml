@model Vitkund.Models.tblResult
   
@{
  
}
<style>


    .header {
        background-color: #29384D;
        height: 40px;
        color: #929DAF;
        text-align: center;
        line-height: 40px;
        border-top-left-radius: 7px;
        border-top-right-radius: 7px;
        font-weight: 400;
        font-size: 1.5em;
        text-shadow: 1px 1px #06060d;
    }


    #chartdiv {
        width: 100%;
        height: 360px;
        font-size: 1.7em !important;
    }
    /*   #container {
        height: 500px;
    }*/
    g.highcharts-label.highcharts-data-label {
        font-size: 2.6em;
    }

    .highcharts-figure,
    .highcharts-data-table table {
        min-width: 320px;
        max-width: 700px;
        margin: 1em auto;
    }

    .highcharts-data-table table {
        border-collapse: collapse;
        border: 1px solid #ebebeb;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
    }

    .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 2.6em;
        color: #555;
    }

    .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
    }

    .highcharts-data-table td,
    .highcharts-data-table th,
    .highcharts-data-table caption {
        padding: 0.5em;
    }

    .highcharts-data-table thead tr,
    .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
    }

    .highcharts-data-table tr:hover {
        background: #f1f7ff;
    }
</style>
<!-- Start Header Area -->
<!-- Start breadcrumb Area -->
<div class="rbt-breadcrumb-default ptb--50 ptb_md--50 ptb_sm--30 bg-gradient-1">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb-inner text-center">
                    <h2 class="title">Result</h2>
                    <ul class="page-list">
                        <li class="rbt-breadcrumb-item"><a href="index">Home</a></li>
                        <li>
                            <div class="icon-right"><i class="feather-chevron-right"></i></div>
                        </li>
                        <li class="rbt-breadcrumb-item active">Result</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- End Breadcrumb Area -->

<main class="rbt-main-wrapper">



    <div class="checkout_area bg-color-white" style="padding-top:30px; padding-bottom:50px;">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 text-center"><h5 id="name"></h5></div>
                <div class="col-lg-6 text-center"><h5 id="businessName"></h5> </div>
                <div class="col-lg-3 text-center" style="margin-bottom:30px;">
                    <a id="score" class="rbt-btn blink btn-border-gradient radius-round btn-sm hover-transform-none" style="background: linear-gradient(90deg, #CFA2E8, #f9ba34);">

                    </a>
                </div>
                <br />
                <hr />

                <div class="col-lg-6">
                    <!-- partial:index.partial.html -->
                    <script src="../Content/assets/js/amcharts.js"></script>
                    <script src="../Content/assets/js/pie.js"></script>
                    <script src="../Content/assets/js/light.js"></script>

                    <script src="https://code.highcharts.com/highcharts.js"></script>
                    <script src="https://code.highcharts.com/modules/variable-pie.js"></script>
                    <script src="https://code.highcharts.com/modules/exporting.js"></script>
                    <script src="https://code.highcharts.com/modules/export-data.js"></script>
                    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

                    <figure class="highcharts-figure">
                        <div id="chartdiv"></div>
                    </figure>

                    <!-- partial -->
                    @if (Model != null)
                    {
                        <script>

                            Highcharts.chart('chartdiv', {
                                chart: {
                                    type: 'variablepie'
                                },
                                title: {
                                    text: '',
                                    align: 'left'
                                },
                                tooltip: {
                                    headerFormat: '',
                                    pointFormat: '<span style="color:{point.color}">\u25CF</span> <b> {point.name}</b><br/>' +
                                        '</b><br/>' +
                                        '</b><br/>'
                                },
                                series: [{
                                    minPointSize: 10,
                                    innerSize: '20%',
                                    zMin: 0,
                                    name: 'countries',
                                    borderRadius: 5,
                                    enableMouseTracking: false,
                                    data: [{
                                        name: 'वयः ' + @Model.Age + '',
                                        y: 505992,
                                        z: 230
                                    }, {
                                            name: 'निर्मिमीते: ' + @Model.Firm + '',
                                        y: 551695,
                                        z: 240
                                        }, {
                                            name: 'पठन: ' + @Model.Education + '',
                                        y: 312679,
                                        z: 250
                                        }, {
                                            name: 'लाभ प्रतिशतः ' + @Model.Profit + '',
                                        y: 423231,
                                        z: 240
                                        }, {
                                            name: 'अनुभव: ' + @Model.Experience + '',
                                        y: 301336,
                                        z: 230
                                        }, {
                                            name: 'परिसर: ' + @Model.Premises + '',
                                        y: 412841,
                                        z: 220
                                        }, {
                                            name: 'वित्त: ' + @Model.Capital + '',
                                        y: 365415,
                                        z: 235
                                    }
                                        , {
                                        name: 'मालस्य उपलब्धता: ' + @Model.Raw + '',
                                        y: 250454,
                                        z: 245
                                    }
                                        , {
                                            name: 'अनुसंधानम: ' + @Model.Research + '',
                                        y: 365453,
                                        z: 255
                                    }
                                        , {
                                            name: 'विपणनम्: ' + @Model.Marketing + '',
                                        y: 254545,
                                        z: 280
                                    }
                                        , {
                                            name: 'अंक: ' + @Model.Cibil + '',
                                        y: 432341,
                                        z: 301
                                    }
                                        , {
                                            name: 'विशेषज्ञाः ' + @Model.BusinessExpertise + '',
                                        y: 423231,
                                        z: 314
                                    }



                                    ],
                                    "export": {
                                        "enabled": false
                                    },
                                    colors: [
                                        '#4caefe',
                                        '#3dc3e8',
                                        '#2dd9db',
                                        '#1feeaf',
                                        '#0ff3a0',
                                        '#00e887',
                                        '#23e274',
                                        '#DE3163',
                                        '#CCCCFF',
                                        '#6495ED',
                                        '#40E0D0',
                                        '#FFBF00'
                                    ]
                                }]
                                , exporting: {
                                    enabled: false
                                }
                            });


                        </script>

                    }
                    else
                    {
                        <script>

                            Highcharts.chart('chartdiv', {
                                chart: {
                                    type: 'variablepie'
                                },
                                title: {
                                    text: '',
                                    align: 'left'
                                },
                                tooltip: {
                                    headerFormat: '',
                                    pointFormat: '<span style="color:{point.color}">\u25CF</span> <b> {point.name}</b><br/>' +
                                        '</b><br/>' +
                                        '</b><br/>'
                                },
                                series: [{
                                    minPointSize: 10,
                                    innerSize: '20%',
                                    zMin: 0,
                                    name: 'countries',
                                    borderRadius: 5,
                                    enableMouseTracking: false,
                                    data: [{
                                        name: 'वयः ' + parseInt(localStorage.getItem("Age")) + '',
                                        y: 505992,
                                        z: 230
                                    }, {
                                        name: 'निर्मिमीते: ' + parseInt(localStorage.getItem("Firms")) + '',
                                        y: 551695,
                                        z: 240
                                    }, {
                                        name: 'पठन: ' + parseInt(localStorage.getItem("Education")) + '',
                                        y: 312679,
                                        z: 250
                                    }, {
                                        name: 'लाभ प्रतिशतः ' + parseInt(localStorage.getItem("Percent")) + '',
                                        y: 423231,
                                        z: 240
                                    }, {
                                        name: 'अनुभव: ' + parseInt(localStorage.getItem("Experience")) + '',
                                        y: 301336,
                                        z: 230
                                    }, {
                                        name: 'परिसर: ' + parseInt(localStorage.getItem("Premises")) + '',
                                        y: 412841,
                                        z: 220
                                    }, {
                                        name: 'वित्त: ' + parseInt(localStorage.getItem("Capital")) + '',
                                        y: 365415,
                                        z: 235
                                    }
                                        , {
                                        name: 'मालस्य उपलब्धता: ' + parseInt(localStorage.getItem("Material")) + '',
                                        y: 250454,
                                        z: 245
                                    }
                                        , {
                                        name: 'अनुसंधानम: ' + parseInt(localStorage.getItem("Research")) + '',
                                        y: 365453,
                                        z: 255
                                    }
                                        , {
                                        name: 'विपणनम्: ' + parseInt(localStorage.getItem("Market")) + '',
                                        y: 254545,
                                        z: 280
                                    }
                                        , {
                                        name: 'अंक: ' + parseInt(localStorage.getItem("Cibil")) + '',
                                        y: 432341,
                                        z: 301
                                    }
                                        , {
                                        name: 'विशेषज्ञाः ' + parseInt(localStorage.getItem("Expertise")) + '',
                                        y: 423231,
                                        z: 314
                                    }



                                    ],
                                    "export": {
                                        "enabled": false
                                    },
                                    colors: [
                                        '#4caefe',
                                        '#3dc3e8',
                                        '#2dd9db',
                                        '#1feeaf',
                                        '#0ff3a0',
                                        '#00e887',
                                        '#23e274',
                                        '#DE3163',
                                        '#CCCCFF',
                                        '#6495ED',
                                        '#40E0D0',
                                        '#FFBF00'
                                    ]
                                }]
                                , exporting: {
                                    enabled: false
                                }
                            });


                        </script>

                    }
                </div>

                <div class="col-lg-6" style="padding-top:50px;">
                    <ul class="legend" style="list-style:none;">
                        <li class="keyone">> 76 Extremly Recommended</li>
                        <li class="keytwo">> 70-75 Highly Recommended</li>
                        <li class="keythree">> 60 - 69 Recommended</li>
                        <li class="keyfour">> 50 - 59 Go Ahead</li>
                        <li class="keysix">> 40 - 49 Need Improvement</li>
                        <li class="keyfive"> Below 39 Not to Go Ahead</li>

                    </ul>
                </div>

                <h1 style="color:#f9ba34;text-align:center"><i>Congratulations</i></h1>
                <span id="finalresult" style="color:red;text-align:center"></span>
                <br />
                @if (Model != null)
                {

                }
                else
                {
                    <form>
                        <div class="row g-5 checkout-form">
                            <div class="col-lg-4 offset-lg-4">
                                <label>&nbsp;</label>
                                <div class="rbt-modern-select bg-transparent height-45">
                                    <select class="w-100 validationcheck" id="plan" required>
                                        @*<option value="">-- Select Plan --</option>*@
                                        <option value="500000">Pro (Recommended) 5000 /(3 Month)</option>
                                        <option value="750000">Clasic 7500 /(6 Month)</option>
                                        <option value="1000000">Silver 10000 /(9 Month)</option>
                                        <option value="1250000">Gold 12500 /(12 Month)</option>

                                    </select>
                                    <span id="spanPlan" style="color:red;display:none">Please select plan</span>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="col-lg-12">
                        <div class="pricing-btn-group text-center" style="margin-top:50px;">
                            <button id="payNow" class="rbt-btn btn-gradient finalpayment">Pay Now</button>
                        </div>

                    </div>
                }
            </div>
        </div>
    </div>

    <div class="rbt-separator-mid">
        <div class="container">
            <hr class="rbt-separator m-0">
        </div>
    </div>


</main>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script src="~/Content/assets/js/script.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script type="text/javascript">
    $(document).ready(function () {


        $('#finalresult').hide();
      
        $('.finalpayment').click(function () {
            //localStorage.clear();
        });
       
        if ('@Model' == '') {
            var name = localStorage.getItem("name");
            if (name == null) {
                window.location.href = "/index";
            }
            result();
            var busname = localStorage.getItem("businessName");

            var score = localStorage.getItem("PagesSum");
            $("#name").html("Name : " + name);
            $("#businessName").html("Business : " + busname);
            $("#score").html("Score : " + score);
            var plan = localStorage.getItem("plan");
            
            if (plan != null) {

                rzp1.open();
                e.preventDefault();
                localStorage.setItem("plan", "");
            }
        } else {
            localStorage.setItem("PagesSum", '@ViewBag.Score');
            $("#name").html("Name : " + '@ViewBag.Name');
            $("#businessName").html("Business : " + '@ViewBag.BusinessName');
            $("#score").html("Score : " + '@ViewBag.Score');
            result();
        }

    });

    var options = {
        "key": "rzp_test_LON13f5tvxkTRW", // Enter the Key ID generated from the Dashboard
        "amount": localStorage.getItem("plan"),
        "currency": "INR",
        "description": "We Make Complete Entrepreneur",
        "image": "http://vitkund.com/Content/assets/images/logo.png",
        //"prefill":
        //{
        //    "email": localStorage.getItem("email"),
        //    "contact": localStorage.getItem("phone"),
        //},
        config: {
            display: {
                blocks: {
                    utib: { //name for Axis block
                        name: "Pay using Axis Bank",
                        instruments: [
                            {
                                method: "card",
                                issuers: ["UTIB"]
                            },
                            {
                                method: "netbanking",
                                banks: ["UTIB"]
                            },
                        ]
                    },
                    other: { //  name for other block
                        name: "Other Payment modes",
                        instruments: [
                            {
                                method: "card",
                                issuers: ["ICIC"]
                            },
                            {
                                method: 'netbanking',
                            }
                        ]
                    }
                },
                hide: [
                    {
                        method: "upi"
                    }
                ],
                sequence: ["block.utib", "block.other"],
                preferences: {
                    show_default_blocks: false // Should Checkout show its default blocks?
                }
            }
        },
        "handler": function (response) {

            console.log(response);
            localStorage.setItem("paymentId", response.razorpay_payment_id);
            window.location.href = "/Thank-you";
            //SignUp(response.razorpay_payment_id);
            //alert(response.razorpay_payment_id);
        },
        "modal": {
            "ondismiss": function () {
                if (confirm("Are you sure, you want to close the form?")) {
                    txt = "You pressed OK!";
                    console.log("Checkout form closed by the user");
                } else {
                    txt = "You pressed Cancel!";
                    console.log("Complete the Payment")
                }
            }
        }
    };
    var rzp1 = new Razorpay(options);
    document.getElementById('payNow').onclick = function (e) {
        var plan = $("#plan option:selected").val();
        if (plan != "") {
            localStorage.setItem("plan", $("#plan option:selected").val());

            location.reload();
            //rzp1.open();
            //e.preventDefault();
        } else {
            $("#spanPlan").show();
        }
    }
    function result() {
        //debugger
        var totalsum = localStorage.getItem("PagesSum")
        if (totalsum >= 76) {
            $(".keyone").css("background-color", "Green");
            $(".keyone").css("color", "#fff");
            $(".keyone").css("padding", "10px");
            $('#finalresult').show();
            $('#finalresult').text("You are Extremly Recommended for Business");
        }
        else if (totalsum >= 70 & totalsum <= 75) {
            $(".keytwo").css("background-color", "Green");
            $(".keytwo").css("color", "#fff");
            $(".keytwo").css("padding", "10px");
            $('#finalresult').show();
            $('#finalresult').text("You are Highly Recommended for Business");
        }
        else if (totalsum >= 60 & totalsum <= 69) {
            $(".keythree").css("background-color", "yellow");
            $(".keythree").css("color", "#333");
            $(".keythree").css("padding", "10px");
            $('#finalresult').show();
            $('#finalresult').text("You are Recommended for Business");
        }
        else if (totalsum >= 50 & totalsum <= 59) {
            $(".keyfour").css("background-color", "yellow");
            $(".keyfour").css("color", "#333");
            $(".keyfour").css("padding", "10px");
            $('#finalresult').show();
            $('#finalresult').text("Recommended for Business");
        }
        else if (totalsum >= 40 & totalsum <= 49) {
            $(".keysix").css("background-color", "Red");
            $(".keysix").css("color", "White");
            $(".keysix").css("padding", "10px");
            $('#finalresult').show();
            $('#finalresult').text("Need Improvment for Business");
            $("#payNow").prop('disabled', true);
        }
        else if (totalsum >= 0 & totalsum <= 39) {
            $(".keyfive").css("background-color", "Red");
            $(".keyfive").css("color", "White");
            $(".keyfive").css("padding", "10px");
            $('#finalresult').show();
            $('#finalresult').text("You are not Recommended for Business");
            $("#payNow").prop('disabled', true);
        }
        else {

        }
    }

</script>

